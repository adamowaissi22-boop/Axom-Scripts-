local AroticUi = {}
local MainUI
local Tabs = {}
local CurrentTab
local Elements = {}

local function CreateUI()
	local ScreenGui = Instance.new("ScreenGui")
	ScreenGui.Name = "AroticUi"
	ScreenGui.ResetOnSpawn = false
	ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
	ScreenGui.Parent = game:GetService("CoreGui")

	local MainFrame = Instance.new("Frame")
	MainFrame.Size = UDim2.new(0, 300, 0, 400)
	MainFrame.Position = UDim2.new(0.5, -150, 0.5, -200)
	MainFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 35)
	MainFrame.BorderSizePixel = 0
	MainFrame.ClipsDescendants = true
	MainFrame.Parent = ScreenGui

	local Header = Instance.new("Frame")
	Header.Size = UDim2.new(1, 0, 0, 30)
	Header.BackgroundColor3 = Color3.fromRGB(25, 25, 30)
	Header.BorderSizePixel = 0
	Header.Parent = MainFrame

	local Title = Instance.new("TextLabel")
	Title.Size = UDim2.new(1, -10, 1, 0)
	Title.Position = UDim2.new(0, 5, 0, 0)
	Title.BackgroundTransparency = 1
	Title.Text = "AroticUi"
	Title.TextColor3 = Color3.fromRGB(255, 255, 255)
	Title.TextSize = 14
	Title.Font = Enum.Font.GothamBold
	Title.Parent = Header

	local CloseBtn = Instance.new("TextButton")
	CloseBtn.Size = UDim2.new(0, 20, 0, 20)
	CloseBtn.Position = UDim2.new(1, -25, 0, 5)
	CloseBtn.BackgroundColor3 = Color3.fromRGB(200, 60, 60)
	CloseBtn.BorderSizePixel = 0
	CloseBtn.Text = "X"
	CloseBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
	CloseBtn.TextSize = 12
	CloseBtn.Font = Enum.Font.GothamBold
	CloseBtn.Parent = Header

	CloseBtn.MouseButton1Click:Connect(function()
		ScreenGui:Destroy()
	end)

	local dragging = false
	local dragStart
	local startPos

	local function updateDrag(input)
		if dragging then
			local delta = input.Position - dragStart
			MainFrame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
		end
	end

	Header.InputBegan:Connect(function(input)
		if input.UserInputType == Enum.UserInputType.MouseButton1 then
			dragging = true
			dragStart = input.Position
			startPos = MainFrame.Position
			game:GetService("UserInputService").InputChanged:Connect(updateDrag)
		end
	end)

	Header.InputEnded:Connect(function(input)
		if input.UserInputType == Enum.UserInputType.MouseButton1 then
			dragging = false
		end
	end)

	local TabHolder = Instance.new("ScrollingFrame")
	TabHolder.Size = UDim2.new(0, 80, 1, -30)
	TabHolder.Position = UDim2.new(0, 0, 0, 30)
	TabHolder.BackgroundTransparency = 1
	TabHolder.BorderSizePixel = 0
	TabHolder.CanvasSize = UDim2.new(0, 0, 0, #Tabs * 35)
	TabHolder.ScrollBarThickness = 5
	TabHolder.ScrollBarImageColor3 = Color3.fromRGB(50, 50, 55)
	TabHolder.Parent = MainFrame

	local ContentHolder = Instance.new("Frame")
	ContentHolder.Size = UDim2.new(0, 220, 1, -30)
	ContentHolder.Position = UDim2.new(0, 80, 0, 30)
	ContentHolder.BackgroundColor3 = Color3.fromRGB(35, 35, 40)
	ContentHolder.BorderSizePixel = 0
	ContentHolder.Parent = MainFrame

	MainUI = {
		ScreenGui = ScreenGui,
		MainFrame = MainFrame,
		TabHolder = TabHolder,
		ContentHolder = ContentHolder
	}
end

function AroticUi:CreateTab(Name)
	if not MainUI then CreateUI() end
	local TabButton = Instance.new("TextButton")
	TabButton.Size = UDim2.new(1, -5, 0, 30)
	TabButton.Position = UDim2.new(0, 2.5, 0, #Tabs * 35)
	TabButton.BackgroundColor3 = Color3.fromRGB(40, 40, 45)
	TabButton.BorderSizePixel = 0
	TabButton.Text = Name
	TabButton.TextColor3 = Color3.fromRGB(220, 220, 220)
	TabButton.TextSize = 13
	TabButton.Font = Enum.Font.Gotham
	TabButton.Parent = MainUI.TabHolder

	TabButton.MouseButton1Click:Connect(function()
		for _, tab in pairs(Tabs) do
			tab.Button.BackgroundColor3 = Color3.fromRGB(40, 40, 45)
			tab.Content.Visible = false
		end
		TabButton.BackgroundColor3 = Color3.fromRGB(50, 50, 55)
		CurrentTab.Content.Visible = true
	end)

	local TabContent = Instance.new("Frame")
	TabContent.Size = UDim2.new(1, 0, 1, 0)
	TabContent.BackgroundTransparency = 1
	TabContent.Visible = false
	TabContent.Parent = MainUI.ContentHolder

	local ScrollingContent = Instance.new("ScrollingFrame")
	ScrollingContent.Size = UDim2.new(1, 0, 1, 0)
	ScrollingContent.BackgroundTransparency = 1
	ScrollingContent.BorderSizePixel = 0
	ScrollingContent.CanvasSize = UDim2.new(0, 0, 0, 0)
	ScrollingContent.ScrollBarThickness = 4
	ScrollingContent.ScrollBarImageColor3 = Color3.fromRGB(60, 60, 65)
	ScrollingContent.Parent = TabContent

	local TabData = {
		Button = TabButton,
		Content = TabContent,
		ScrollingContent = ScrollingContent,
		NextY = 0
	}

	if #Tabs == 0 then
		TabButton.BackgroundColor3 = Color3.fromRGB(50, 50, 55)
		TabContent.Visible = true
		CurrentTab = TabData
	end

	table.insert(Tabs, TabData)
	MainUI.TabHolder.CanvasSize = UDim2.new(0, 0, 0, #Tabs * 35)
	return TabData
end

function AroticUi:CreateButton(Tab, Name, Callback)
	local Button = Instance.new("TextButton")
	Button.Size = UDim2.new(1, -10, 0, 30)
	Button.Position = UDim2.new(0, 5, 0, Tab.NextY)
	Button.BackgroundColor3 = Color3.fromRGB(50, 50, 55)
	Button.BorderSizePixel = 0
	Button.Text = Name
	Button.TextColor3 = Color3.fromRGB(255, 255, 255)
	Button.TextSize = 13
	Button.Font = Enum.Font.GothamBold
	Button.Parent = Tab.ScrollingContent

	Button.MouseButton1Click:Connect(Callback)

	Tab.NextY = Tab.NextY + 35
	Tab.ScrollingContent.CanvasSize = UDim2.new(0, 0, 0, Tab.NextY)
	return Button
end

function AroticUi:CreateTextBox(Tab, Name, Default, Callback)
	local Frame = Instance.new("Frame")
	Frame.Size = UDim2.new(1, -10, 0, 30)
	Frame.Position = UDim2.new(0, 5, 0, Tab.NextY)
	Frame.BackgroundColor3 = Color3.fromRGB(45, 45, 50)
	Frame.BorderSizePixel = 0
	Frame.Parent = Tab.ScrollingContent

	local Label = Instance.new("TextLabel")
	Label.Size = UDim2.new(0, 100, 1, 0)
	Label.BackgroundTransparency = 1
	Label.Text = Name
	Label.TextColor3 = Color3.fromRGB(220, 220, 220)
	Label.TextSize = 13
	Label.Font = Enum.Font.Gotham
	Label.Parent = Frame

	local TextBox = Instance.new("TextBox")
	TextBox.Size = UDim2.new(0, 100, 1, -4)
	TextBox.Position = UDim2.new(1, -105, 0, 2)
	TextBox.BackgroundColor3 = Color3.fromRGB(55, 55, 60)
	TextBox.BorderSizePixel = 0
	TextBox.Text = Default or ""
	TextBox.TextColor3 = Color3.fromRGB(255, 255, 255)
	TextBox.TextSize = 13
	TextBox.Font = Enum.Font.Gotham
	TextBox.Parent = Frame

	TextBox.FocusLost:Connect(function(enterPressed)
		if enterPressed or not game:GetService("UserInputService"):GetFocusedTextBox() then
			if Callback then Callback(TextBox.Text) end
		end
	end)

	Tab.NextY = Tab.NextY + 35
	Tab.ScrollingContent.CanvasSize = UDim2.new(0, 0, 0, Tab.NextY)
	return TextBox
end

function AroticUi:CreateToggle(Tab, Name, Default, Callback)
	local Frame = Instance.new("Frame")
	Frame.Size = UDim2.new(1, -10, 0, 30)
	Frame.Position = UDim2.new(0, 5, 0, Tab.NextY)
	Frame.BackgroundColor3 = Color3.fromRGB(45, 45, 50)
	Frame.BorderSizePixel = 0
	Frame.Parent = Tab.ScrollingContent

	local Label = Instance.new("TextLabel")
	Label.Size = UDim2.new(1, -50, 1, 0)
	Label.BackgroundTransparency = 1
	Label.Text = Name
	Label.TextColor3 = Color3.fromRGB(220, 220, 220)
	Label.TextSize = 13
	Label.Font = Enum.Font.Gotham
	Label.Parent = Frame

	local ToggleFrame = Instance.new("Frame")
	ToggleFrame.Size = UDim2.new(0, 40, 0, 20)
	ToggleFrame.Position = UDim2.new(1, -45, 0, 5)
	ToggleFrame.BackgroundColor3 = Default and Color3.fromRGB(60, 200, 100) or Color3.fromRGB(60, 60, 70)
	ToggleFrame.BorderSizePixel = 0
	ToggleFrame.Parent = Frame

	local ToggleCircle = Instance.new("Frame")
	ToggleCircle.Size = UDim2.new(0, 16, 0, 16)
	ToggleCircle.Position = UDim2.new(Default and 1 or 0, Default and -18 or 2, 0, 2)
	ToggleCircle.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
	ToggleCircle.BorderSizePixel = 0
	ToggleCircle.Parent = ToggleFrame

	local Toggled = Default or false

	local function UpdateToggle()
		Toggled = not Toggled
		ToggleFrame.BackgroundColor3 = Toggled and Color3.fromRGB(60, 200, 100) or Color3.fromRGB(60, 60, 70)
		ToggleCircle:TweenPosition(Toggled and UDim2.new(1, -18, 0, 2) or UDim2.new(0, 2, 0, 2), "Out", "Quad", 0.1, true)
		if Callback then Callback(Toggled) end
	end

	Frame.MouseButton1Click:Connect(UpdateToggle)
	ToggleFrame.MouseButton1Click:Connect(UpdateToggle)

	Tab.NextY = Tab.NextY + 35
	Tab.ScrollingContent.CanvasSize = UDim2.new(0, 0, 0, Tab.NextY)
	return {Toggle = UpdateToggle, Set = function(state)
		if Toggled ~= state then
			UpdateToggle()
		end
	end, Get = function() return Toggled end}
end

function AroticUi:CreateSlider(Tab, Name, Min, Max, Default, Callback)
	local Frame = Instance.new("Frame")
	Frame.Size = UDim2.new(1, -10, 0, 40)
	Frame.Position = UDim2.new(0, 5, 0, Tab.NextY)
	Frame.BackgroundColor3 = Color3.fromRGB(45, 45, 50)
	Frame.BorderSizePixel = 0
	Frame.Parent = Tab.ScrollingContent

	local Label = Instance.new("TextLabel")
	Label.Size = UDim2.new(1, -10, 0, 20)
	Label.Position = UDim2.new(0, 0, 0, 0)
	Label.BackgroundTransparency = 1
	Label.Text = Name .. ": " .. tostring(Default)
	Label.TextColor3 = Color3.fromRGB(220, 220, 220)
	Label.TextSize = 13
	Label.Font = Enum.Font.Gotham
	Label.Parent = Frame

	local SliderFrame = Instance.new("Frame")
	SliderFrame.Size = UDim2.new(1, -10, 0, 10)
	SliderFrame.Position = UDim2.new(0, 5, 0, 25)
	SliderFrame.BackgroundColor3 = Color3.fromRGB(55, 55, 60)
	SliderFrame.BorderSizePixel = 0
	SliderFrame.Parent = Frame

	local SliderBar = Instance.new("Frame")
	SliderBar.Size = UDim2.new((Default - Min) / (Max - Min), 0, 1, 0)
	SliderBar.BackgroundColor3 = Color3.fromRGB(60, 120, 200)
	SliderBar.BorderSizePixel = 0
	SliderBar.Parent = SliderFrame

	local SliderThumb = Instance.new("Frame")
	SliderThumb.Size = UDim2.new(0, 15, 0, 15)
	SliderThumb.Position = UDim2.new((Default - Min) / (Max - Min), -7.5, 0, -2.5)
	SliderThumb.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
	SliderThumb.BorderSizePixel = 0
	SliderThumb.Parent = SliderFrame

	local Value = Default

	local function UpdateSlider(mousePos)
		local relPos = (mousePos.X - SliderFrame.AbsolutePosition.X) / SliderFrame.AbsoluteSize.X
		relPos = math.clamp(relPos, 0, 1)
		Value = math.floor(Min + (Max - Min) * relPos + 0.5)
		SliderBar.Size = UDim2.new(relPos, 0, 1, 0)
		SliderThumb.Position = UDim2.new(relPos, -7.5, 0, -2.5)
		Label.Text = Name .. ": " .. tostring(Value)
		if Callback then Callback(Value) end
	end

	local dragging = false
	SliderThumb.MouseButton1Down:Connect(function()
		dragging = true
	end)

	game:GetService("UserInputService").InputChanged:Connect(function(input)
		if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
			UpdateSlider(input.Position)
		end
	end)

	game:GetService("UserInputService").InputEnded:Connect(function(input)
		if input.UserInputType == Enum.UserInputType.MouseButton1 then
			dragging = false
		end
	end)

	Tab.NextY = Tab.NextY + 45
	Tab.ScrollingContent.CanvasSize = UDim2.new(0, 0, 0, Tab.NextY)
	return {Set = function(v)
		v = math.clamp(v, Min, Max)
		Value = v
		local rel = (v - Min) / (Max - Min)
		SliderBar.Size = UDim2.new(rel, 0, 1, 0)
		SliderThumb.Position = UDim2.new(rel, -7.5, 0, -2.5)
		Label.Text = Name .. ": " .. tostring(v)
	end, Get = function() return Value end}
end

return AroticUi
